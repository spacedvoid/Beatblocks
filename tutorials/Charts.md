# BIC(Beatblocks Intermediate Chart) 채보 파일

---

**중요:** 아래에서 설명하는 채보 파일은 Beatblocks가 인식하고 바로 실행할 수 있는, 바이트코드와 비슷한 형식의 파일로서
플레이어가 직접 작성하는 것은 난이도가 매우 높습니다.
이 문서는 단순히 변환된 채보 파일의 구조를 설명하는 글로써, 이 글을 읽고 바로 채보를 만들 수 있다는 보장은 할 수 없습니다.
추후에 만들어질 인터프리터를 사용하는 것을 강력히 추천합니다.

---

- BIC 채보 파일의 형식은 현재 Default만 있지만,
[YAML 형식](../src/main/java/net/spacedvoid/beatblocks/singleplayer/parser/YamlParser.java)으로
더 쉽게 해석 및 변환 가능하게 만들 예정입니다.
아래에서는 Default 형식에 대해서만 설명합니다.

---

## Default

모든 키에 대응하는 값은 0~9의 숫자, 영어 대소문자, 마침표와 콜론( : )만 사용가능합니다.
기타 제한사항이 있는 경우 각 키의 설명에 작성되어 있습니다.

```
format=<String>
sound-file=<String>
song=<String>
artist=<String>
creator=<String>
difficulty=<double>
bpm=<double>
time=<Time>
offset=<int>
keys=<int>
chart=
<int>,<int>,<boolean>    //tick,lane,hasDoubleAccuracy
<int>,<int>,<boolean>
:
:
```

### 타입

- `String`<!---->**:** 문자열
- `int`<!---->**:** 정수
- `double`<!---->**:** 소수
- `boolean`<!---->**:** `true` 또는 `false`
- `Time`<!---->**:** `mm:ss` 형식의 시간 표현
  - ex) `15:32` - 15분 32초
  - `00:00` 또는 음수의 시간은 표현 불가

---
### 구성요소

- **format**
  - 변환된 채보 파일의 형식을 나타냄
  - 주로 `형식-버전` 꼴로 나타냄
  - 기본값 `Default-1.0`

- **sound-file**
  - 사용할 음악 파일의 이름
  - 채보 파일과 같은 폴더에 존재해야 함
  - ogg 형식의 파일이어야 하며, 확장자( .ogg )를 포함함

- **song**
  - 음악 제목

- **artist**
  - 작곡가의 이름

- **creator**
  - 채보 작성자의 이름
  - 마인크래프트 닉네임으로 하는 것을 추천

- **difficulty**
  - 난이도, 0.1 부터 10 사이의 소수
  - `x.y` 꼴의 정수 부분 한 자리, 소수 부분 한 자리 (소수 부분은 생략 가능)

- **bpm**
  - 음악의 BPM
  - 실제 플레이에서 변경되더라도 음악 내에서 유지되는 기본 BPM을 사용
  - 게임플레이 중 노트 생성에는 관여하지 않음

- **time**
  - 음악의 길이

- **offset**
  - 음악을 재생할 때 오차를 바로잡기 위한 오프셋
  - 음수값은 노트가 더 일찍 내려오며, 양수값은 노트가 더 늦게 내려옴
  - 단위는 tick(1 tick = 50ms = 0.05초)

- **keys**
  - 사용할 키의 개수를 표시
  - 가능한 값은 2, 4, 6, 8
  - 각 값별 사용하는 라인
    - 2<!---->**:** 4 ~ 5
    - 4<!---->**:** 3 ~ 6
    - 6<!---->**:** 2 ~ 7
    - 8<!---->**:** 1 ~ 8

- **chart**
  - 구성 요소는 `타이밍,라인,판정`
    - 타이밍 : 이전 노트 이후 노트가 생성되는 딜레이, 단위는 tick
    - 라인 : 노트가 내려올 라인
      - 0~3 또는 5~8 까지의 정수값
        - 순서대로 0<!---->**:** 1번 라인, 1<!---->**:** 2번 라인, **···** , 3<!---->**:** 4번 라인,
        5<!---->**:** 5번 라인, **···** , 8<!---->**:** 8번 라인
      - `keys`에 명시된 사용할 라인을 벗어날 수 없음
    - 판정 : 애매한 판정 여부. 자세한 내용은 [게임플레이](./Gameplay.md#애매한-판정에-대해) 참고
  - 각 구성 요소가 파일 끝까지, 각 노트마다 한 줄씩 표현